# Corpse Origin: 生物系统设计

## 核心循环

本模组生物系统以**感染-变异-进化**为核心循环：生物接触尸水后进入携带/发病/变异三阶段，变异时根据生前属性与执念转化为特定形态，击杀吞噬积累进化点解锁能力树，最终可晋升为拥有多阶段战斗机制的首领实体；同时支持群体智能、稀有突变、生态竞争等 emergent 玩法，龙右作为机制集大成者提供终极模板。

---

## 一、感染系统

### 触发事件
玩家找到龙右的棺材后，若不慎将其**丢入/放置于水中**，棺材将缓慢释放尸兄病毒。若无人干预，水源将在**32格范围内**完全转化为尸水。

**当前实现**：
- 棺材放置水中 → 32格范围内水被感染
- 棺材移除 → 仅在海洋中（16x16范围内水方块>100）清除感染
- 棺材检测羊（16格半径）→ 触发召唤和动画

### 感染途径
| 方式 | 条件 | 感染值增长 |
|-----|------|-----------|
| 直接接触 | 生物处于尸水方块中 | 每500ms检查一次 |
| 饮用 | 生物尝试饮用尸水 | 暂未实现 |
| 伤口渗透 | 生物生命值&lt;50%时接触 | 暂未实现 |
| 母体传播 | 感染母体繁殖 | 暂未实现 |

### 感染阶段
| 阶段 | 持续时间 | 表现 | 可逆性 |
|-----|--------|------|--------|
| 携带期 | 持续接触 | 无外观变化，可传播病毒 | ✓ 血清治愈 |
| 发病期 | 中毒效果持续 | 皮肤苍白，咳嗽，移速-10% | ✓ 高级血清 |
| 病变期 | 持续中毒 | 血管凸起，攻击欲望+，拒绝正常食物 | △ 治愈后虚弱 |
| 转化期 | 效果持续20tick | **触发变异**，实体替换为尸兄 | ✗ 不可逆 |

### 转化规则
转化时读取原实体数据：
- **基础属性**（生命/攻击/速度）→ 决定尸兄强度基准
- **最后行为**（进食/战斗/逃跑/保护）→ 决定变异方向
- **击杀记录** → 高击杀数生成复仇型/猎手型

**当前实现**：
- 玩家接触尸水 → 获得中毒效果（60tick，每3秒一次）
- 非玩家生物接触尸水 → 获得尸兄病毒效果（20tick触发变异）
- 变异规则：猪→牛，羊→猪，牛→羊，僵尸→骷髅，骷髅→僵尸，苦力怕→末影人

---

## 二、变异系统

### 典型行为事件
变异后的尸兄会表现出三种核心冲动，玩家可通过观察判断威胁等级：

#### 1. 暴食冲动
- **音效**：持续发出咀嚼/吞咽声，音量随饥饿度增加
- **行为**：优先攻击可食用生物，击杀后停顿进食（3秒硬直）
- **特殊**：进食时回复20%生命值，可被打断

#### 2. 循声狩猎
- **触发**：玩家/生物制造噪音（挖掘、奔跑、攻击）
- **范围**：低阶15格 / 高阶40格 / 首领全图感知
- **机制**：噪音越大，尸兄移速加成越高（最高+50%）

#### 3. 同类相食
- **条件**：低阶尸兄（进化点&lt;100）相遇，且附近无其他猎物
- **概率**：30%触发内战，胜者吞噬败者
- **结果**：胜者立即获得败者50%进化点，可能触发**紧急进化**

### 恐怖表现库
变异尸兄随机获得1-3种外观特征：
- **表皮**：溃烂/角质化/透明化可见内脏/多眼增生
- **肢体**：关节反转/额外附肢/骨骼外露/触手替代
- **行为**：头颅180度转动/爬行移动/关节反折奔跑/无下颌嚎叫

---

## 三、进化系统

### 两大路线

结合原作**炎黄武道**与**尸兄肉体进化**设定：

#### 路线A：修气（武道/异能）
&gt; *"以气御力，破而后立"*

| 阶段 | 名称 | 特征 | 解锁能力 |
|-----|------|------|---------|
| 地级 | 气感 | 体表微光，攻击带气流 | 气劲外放（远程普攻） |
| 天级 | 化形 | 气凝为武器/护甲 | 气罡护体（伤害减免） |
| 神级 | 领域 | 周身气压扭曲空间 | 气场压制（范围内敌方弱化） |
| 超神 | 归元 | 与天地共鸣 | 天地一击（蓄力全屏伤害） |

**获取方式**：
- 吞噬武者型尸兄/人类强者
- 修炼特殊功法物品（如《炎黄诀》）
- 龙右亲自"赐血"（剧情事件）

#### 路线B：修肉身（吞噬/变异）
&gt; *"弱肉强食，适者生存"*

| 阶段 | 名称 | 特征 | 解锁能力 |
|-----|------|------|---------|
| 地级 | 硬化 | 皮肤角质/骨甲覆盖 | 伤害减免，反伤 |
| 天级 | 再生 | 伤口快速愈合，断肢重生 | 战斗回血，复活一次 |
| 神级 | 异化 | 多器官/多形态切换 | 根据敌人切换抗性 |
| 超神 | 不死 | 细胞级再生，概念性存活 | 需特殊手段封印 |

**获取方式**：
- 大量吞噬生物（数量/质量均计算）
- 承受极端环境（熔岩/深海/真空）
- 被高阶尸兄击败后"放生"（残血逃跑后变异）

### 路线交织
- **单修**：专注一条路线，进阶快，弱点明显（气修怕近身/体修怕控制）
- **双修**：两条路线均投资，平衡但难以达到超神
- **变异**：特殊事件可转换路线（如气修被吞噬后转为体修保留部分能力）

---

## 四、首领晋升

### 晋升条件
满足以下任一条件，普通尸兄进化为**首领级**：

| 条件 | 说明 |
|-----|------|
| 进化点≥1000 | 纯吞噬积累 |
| 击杀玩家≥3次 | 同一名玩家或不同玩家均可 |
| 吞噬特殊个体 | 命名生物/稀有变种/其他首领 |
| 剧情触发 | 龙右点名/特定地点觉醒 |

### 首领模板
- **多阶段**：至少2个战斗阶段，血量阈值触发
- **场地互动**：利用环境机制，改变战斗区域
- **召唤能力**：可召唤低阶尸兄协助
- **掉落专属**：首领级材料，制作顶级装备

---

## 五、特殊机制

### 群体智能
- **信息素通讯**：尸兄通过气味标记共享敌人位置
- **分工协作**：大型尸潮中自动出现前锋/投掷/治疗角色
- **统帅链接**：首领存在时，范围内尸兄获得战术加成

### 稀有突变
- **环境适应**：极端环境生成的尸兄获得对应元素能力
- **命名个体**：满足隐藏条件生成的唯一尸兄，死亡不刷新

### 生态竞争
- **种内捕食**：高阶吞噬低阶，加速进化
- **领地意识**：首领级尸兄划定领地，入侵者必战
- **进化军备**：玩家越强，生成的尸兄平均等级越高

---

## 六、龙右（机制集大成者）

作为参照模板，龙右拥有：

| 系统 | 表现 |
|-----|------|
| 感染 | 主动展开"尸域"，范围内强制转化 |
| 变异 | 不死鸟七形态自由切换 |
| 进化 | 气/体双修且均达超神 |
| 阶段 | 七阶段战斗，每阶段解锁新机制 |
| 统帅 | 绝对控制全球尸兄，如臂使指 |

---

*版本：0.1*
*状态：部分机制已实现*
- ✅ 尸水感染系统（32格范围，能量衰减）
- ✅ 棺材召唤系统（检测羊触发）
- ✅ 玩家/生物中毒效果
- ✅ 尸水桶/水瓶收集和放置
- ✅ 感染数据持久化
- ⏳ 变异系统（基础框架已实现）
- ⏳ 进化系统（待实现）
- ⏳ 首领系统（待实现）
- ⏳ 群体智能（待实现）
